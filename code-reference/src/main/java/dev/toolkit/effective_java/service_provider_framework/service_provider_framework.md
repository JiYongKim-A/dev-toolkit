### β… **μ„λΉ„μ¤ μ κ³µμ ν”„λ μ„μ›ν¬(Service Provider Framework)**

- μ„λΉ„μ¤ μ κ³µμ ν”„λ μ„μ›ν¬λ”
    - ν΄λΌμ΄μ–ΈνΈ μ½”λ“κ°€ **νΉμ • κµ¬ν„μ²΄(μ„λΉ„μ¤ μ κ³µμ)μ— μΆ…μ†λμ§€ μ•κ³ **,
    - **μ¶”μƒν™”λ μ„λΉ„μ¤ μΈν„°νμ΄μ¤**λ¥Ό ν†µν•΄ μ›ν•λ” κΈ°λ¥μ„ μ‚¬μ©ν•  μ μλ„λ΅ μ„¤κ³„λ μ•„ν‚¤ν…μ² ν¨ν„΄ μ΄λ‹¤.

> μ¦‰, β‘ **ν΄λΌμ΄μ–ΈνΈλ” κµ¬μ²΄μ μΈ κµ¬ν„ λ°©λ²•μ„ μ• ν•„μ” μ—†μ΄** β‘΅**μΈν„°νμ΄μ¤μ— μ •μλ κΈ°λ¥μ„ μ‚¬μ©**ν•κ³ ,
>
>
> **β‘Ά**μ‹¤μ  κµ¬ν„μ²΄λ” λ‚μ¤‘μ— μ¶”κ°€ν•κ±°λ‚ λ³€κ²½ν•  μ μλ” μ μ—°ν• κµ¬μ΅°**λ¥Ό μ κ³µν•λ‹¤.**
>

---

## π“ **μ„λΉ„μ¤ μ κ³µμ ν”„λ μ„μ›ν¬μ ν•µμ‹¬ κµ¬μ„± μ”μ†**

> μ„λΉ„μ¤ μ κ³µμ ν”„λ μ„μ›ν¬λ” μΌλ°μ μΌλ΅ λ‹¤μ **4κ°€μ§€ ν•µμ‹¬ μ»΄ν¬λ„νΈ**λ΅ κµ¬μ„±λλ‹¤.
>

### **1. μ„λΉ„μ¤ μΈν„°νμ΄μ¤ (Service Interface) (π”¥ ν•„μ μ”μ†)**

- **μ •μ**
    - μ„λΉ„μ¤μ λ™μ‘μ„ μ •μν•λ” μΈν„°νμ΄μ¤.
    - μ‹¤μ  ν΄λΌμ΄μ–ΈνΈ μ΄μ©ν•λ” μΈν„°νμ΄μ¤.
- **νΉμ§•**
    - ν΄λΌμ΄μ–ΈνΈλ” **μ΄ μΈν„°νμ΄μ¤λ§ μμ΅΄**ν•λ©°, **κµ¬μ²΄μ μΈ κµ¬ν„μ²΄κ°€ λ¬΄μ—‡μΈμ§€ λ°λΌλ„ λ¨**.
    - μΈν„°νμ΄μ¤μ— μ •μλ λ©”μ„λ“λ¥Ό νΈμ¶ν•μ—¬ μ›ν•λ” κΈ°λ¥μ„ μ‚¬μ©ν•  μ μμ.

- **μμ‹**
    ```java
  public interface MyService {
        void execute();
    }
  ```

<br>

### **2. μ κ³µμ λ“±λ΅ API (π”¥ ν•„μ μ”μ†)**

- **μ •μ:**
    - μ„λΉ„μ¤ κµ¬ν„μ²΄(μ κ³µμ)κ°€ ν”„λ μ„μ›ν¬μ—μ„ μΈμ‹λ  μ μλ„λ΅ μ§€μ›ν•λ” API
    - **λ“±λ΅ν•λ” κ³Όμ •κ³Όλ” λ³„κ°λ΅, μ΄λ―Έ λ“±λ΅λ μ κ³µμλ¥Ό κ²€μƒ‰ν•κ³  ν™μ©ν•  μ μλ„λ΅ λ•λ” API μ΄λ‹¤.**

    <br>
- **λ“±λ΅ λ°©λ²•:**
    - μ κ³µμλ¥Ό λ“±λ΅ν•λ” λ°©λ²•μ€ λ”°λ΅ μ΅΄μ¬ν•λ©°, μΌλ°μ μΌλ΅ `META-INF/services` λ””λ ‰ν„°λ¦¬λ¥Ό ν™μ©ν•λ‹¤.
    - μλ¥Ό λ“¤μ–΄, `META-INF/services/com.example.MyServiceProvider` νμΌμ„ μƒμ„±ν•κ³ , ν•΄λ‹Ή νμΌμ— κµ¬ν„μ²΄(μ: `com.example.MyServiceImplAProvider`)λ¥Ό λ“±λ΅ν•λ‹¤.
      
    <br>
- **νΉμ§•:**
    - **μ κ³µμ λ“±λ΅ APIλ” μ§μ ‘ μ κ³µμλ¥Ό λ“±λ΅ν•μ§€ μ•κ³ , λ“±λ΅λ μ κ³µμλ¥Ό κ²€μƒ‰ν•κ³  ν™μ©ν•λ” μ—­ν• μ„ μν–‰ν•λ‹¤.**
    - λ‹¤μ–‘ν• κµ¬ν„μ²΄κ°€ ν”„λ μ„μ›ν¬μ—μ„ μ‚¬μ©ν•  μ μλ„λ΅ κ΄€λ¦¬ν•  μ μλ‹¤.
    - ν΄λΌμ΄μ–ΈνΈκ°€ ν•„μ”ν•  λ• μ μ ν• κµ¬ν„μ²΄λ¥Ό μ„ νƒν•  μ μλ„λ΅ μ§€μ›ν•λ‹¤.
      
    <br>
- **μ κ³µμ λ“±λ΅ APIλ¥Ό μν–‰ν•λ” μ£Όμ²΄:**
    - **μ΄ μ—­ν• μ„ μν–‰ν•λ” λ€ν‘μ μΈ APIκ°€ `ServiceLoader`**
    - `ServiceLoader`λ” `META-INF/services`μ— λ“±λ΅λ μ κ³µμλ¥Ό κ²€μƒ‰ν•κ³ , λ™μ μΌλ΅ λ΅λ“ν•μ—¬ ν™μ©ν•  μ μλ„λ΅ ν•λ‹¤.

<br>

π“ **μμ : ServiceLoaderλ¥Ό ν™μ©ν• μ κ³µμ κ²€μƒ‰ λ° λ΅λ“**

```java
ServiceLoader<MyServiceProvider> loader = ServiceLoader.load(MyServiceProvider.class);
for (MyServiceProvider provider : loader) {
    MyService service = provider.create();  // λ“±λ΅λ μ κ³µμλ΅λ¶€ν„° κ°μ²΄ μƒμ„±
    service.execute();
}
```

β”οΈ **μ—¬κΈ°μ„ `ServiceLoader.load(MyServiceProvider.class)`κ°€ μ κ³µμ λ“±λ΅ API μ—­ν• μ„ μν–‰ν•λ©°, λ“±λ΅λ μ κ³µμλ¥Ό κ²€μƒ‰ν•κ³  ν™μ©ν•  μ μλ„λ΅ μ§€μ›ν•λ‹¤.** π€


<br>

### **3. μ„λΉ„μ¤ μ ‘κ·Ό API (Service Access API) (π”¥ ν•„μ μ”μ†)**

- **μ •μ**
    - ν΄λΌμ΄μ–ΈνΈκ°€ μΈν„°νμ΄μ¤μ κΈ°λ¥μ„ μ‚¬μ©ν•  λ•,
        - μ‹¤μ  μ„λΉ„μ¤μ λ™μ‘μ„ μν–‰ν•λ” κµ¬ν„μ²΄λ¥Ό μ–»κΈ° μ„ν•΄ νΈμ¶ν•λ” API"
          
        <br>
- **νΉμ§•**
    - μΌλ°μ μΌλ΅ **μ •μ  ν©ν„°λ¦¬ λ©”μ„λ“(Static Factory Method)** ν•νƒλ΅ κµ¬ν„λ¨.
    - **μ…λ ¥ λ§¤κ°λ³€μμ— λ”°λΌ λ‹¤μ–‘ν• κµ¬ν„μ²΄(ν•μ„ νƒ€μ…)λ¥Ό λ°ν™ν•  μ μμ**.
    - ν΄λΌμ΄μ–ΈνΈλ” μ΄ APIλ¥Ό νΈμ¶ν•μ—¬ μ΅°κ±΄μ— λ§λ” μΈμ¤ν„΄μ¤λ¥Ό μ–»μ–΄ μ‚¬μ©ν•  μ μμ.
      
    <br>
- μμ‹

    ```java
    public class ServiceFactory {
        public static MyService getService(String type) {
            if (type.equals("A")) {
                return new MyServiceImplA();
            } else if (type.equals("B")) {
                return new MyServiceImplB();
            }
            throw new IllegalArgumentException("Unknown service type");
        }
    }
    ```

    - μ •μ  ν©ν„°λ¦¬ λ©”μ„λ“λ¥Ό μ‚¬μ©ν•μ—¬
        - ν΄λΌμ΄μ–ΈνΈλ” ν•„μ”ν• ν•νƒμ Service μΈμ¤ν„΄μ¤λ¥Ό λ°ν™λ°›μ•„ μ‚¬μ©ν•λ‹¤.

      
<br>


### **4. μ„λΉ„μ¤ μ κ³µμ μΈν„°νμ΄μ¤ (Service Provider Interface, SPI) (β μ„ νƒ μ”μ†)**

- **μ •μ**
    - **μ„λΉ„μ¤ μ κ³µμκ°€ μμ‹ μ„ μƒμ„±ν•λ” λ°©λ²•μ„ λ…μ‹μ μΌλ΅ μ •μν•λ” μΈν„°νμ΄μ¤.**
    - **κ° κµ¬ν„μ²΄κ°€ κ°μ²΄ μƒμ„± λ°©μ‹μ„ μ§μ ‘ μ μ–΄ν•  μ μλ„λ΅ μ§€μ›.**
    - **`ServiceLoader`μ™€ ν•¨κ» μ‚¬μ©ν•μ—¬ λ™μ μΌλ΅ κµ¬ν„μ²΄λ¥Ό λ΅λ“ν•  μ μμ.**
      
    <br>
- **SPIμ νΉμ§•**
    - `ServiceLoader`λ¥Ό μ‚¬μ©ν•  λ•, **κΈ°λ³Έ μƒμ„±μκ°€ κ°•μ λλ” λ¬Έμ λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄ λ„μ…λ¨.**
    - **κΈ°λ³Έ μƒμ„±μ μ—†μ΄λ„ κ°μ²΄ μƒμ„± κ°€λ¥!**
    - **κ°μ²΄ μƒμ„± λ°©μ‹(μ‹±κΈ€ν„΄, μ •μ  ν©ν„°λ¦¬ λ©”μ„λ“, λ§¤κ°λ³€μ μ£Όμ… λ“±) μ»¤μ¤ν„°λ§μ΄μ§• κ°€λ¥.**
    - **ν•μ§€λ§, κΈ°λ³Έ μƒμ„±μλ΅ μ¶©λ¶„ν•λ©΄ SPIλ” ν•„μ” μ—†μ.**
      
    <br>
- **SPIκ°€ ν•„μ” μ—†λ” κ²½μ° (κΈ°λ³Έ μƒμ„±μλ΅ μ¶©λ¶„ν•  λ•)**

  π“ **SPI μ—†μ΄ `ServiceLoader`λ§ μ‚¬μ©ν•λ” κ²½μ°, κΈ°λ³Έ μƒμ„±μκ°€ ν•„μ!**

    ```java
    // μΈν„°νμ΄μ¤ μ •μ
    public interface MyService {
        void execute();
    }
    
    // κµ¬ν„μ²΄ (κΈ°λ³Έ μƒμ„±μκ°€ λ°λ“μ‹ ν•„μ”)
    public class MyServiceImplA implements MyService {
        public MyServiceImplA() {} // κΈ°λ³Έ μƒμ„±μ ν•„μ
        @Override
        public void execute() {
            System.out.println("Executing Service A");
        }
    }
    
    // ServiceLoaderλ¥Ό ν†µν•΄ κΈ°λ³Έ μƒμ„±μλ΅ κ°μ²΄ μƒμ„±
    ServiceLoader<MyService> loader = ServiceLoader.load(MyService.class);
    for (MyService service : loader) {
        service.execute();  // "Executing Service A"
    }
    
    ```

  > **κΈ°λ³Έ μƒμ„±μκ°€ μμΌλ©΄ `ServiceLoader`λ§μΌλ΅λ„ κ°μ²΄λ¥Ό μƒμ„±ν•  μ μμ.
  μ¦‰, κ°μ²΄ μƒμ„± λ°©μ‹μ„ μ§μ ‘ μ μ–΄ν•  ν•„μ”κ°€ μ—†λ‹¤λ©΄ SPIλ¥Ό μ‚¬μ©ν•μ§€ μ•μ•„λ„ λ¨.**

<br>

- **SPIλ¥Ό μ‚¬μ©ν•λ” κ²½μ° (κ°μ²΄ μƒμ„± λ°©μ‹ μ μ–΄κ°€ ν•„μ”ν•  λ•)**

  π“ **SPIλ¥Ό μ‚¬μ©ν•λ©΄ κΈ°λ³Έ μƒμ„±μκ°€ μ—†μ–΄λ„ λ™μ‘ν•λ©°, κ°μ²΄ μƒμ„± λ°©μ‹μ„ μ μ—°ν•κ² μ΅°μ • κ°€λ¥.**

    ```java
    // μ„λΉ„μ¤ μ κ³µμ μΈν„°νμ΄μ¤ (SPI)
    public interface MyServiceProvider {
        MyService create(); // κ°μ²΄ μƒμ„± λ°©μ‹ μ •μ
    }
    
    // νΉμ • κµ¬ν„μ²΄ Aμ μ κ³µμ (μ •μ  ν©ν„°λ¦¬ λ©”μ„λ“ ν™μ©)
    public class MyServiceImplAProvider implements MyServiceProvider {
        @Override
        public MyService create() {
            return new MyServiceImplA();  // μ§μ ‘ κ°μ²΄ μƒμ„±
        }
    }
    
    // ServiceLoaderλ¥Ό μ‚¬μ©ν•μ—¬ SPI κΈ°λ°μΌλ΅ λ΅λ“
    ServiceLoader<MyServiceProvider> loader = ServiceLoader.load(MyServiceProvider.class);
    for (MyServiceProvider provider : loader) {
        MyService service = provider.create(); // SPIλ¥Ό ν†µν•΄ μƒμ„±λ μΈμ¤ν„΄μ¤ μ‚¬μ©
        service.execute();
    }
    ```

> **κΈ°λ³Έ μƒμ„±μκ°€ μ—†μ–΄λ„ κ°μ²΄λ¥Ό μƒμ„±ν•  μ μμ.
  κ°μ²΄ μƒμ„± λ°©μ‹μ„ μ μ—°ν•κ² λ³€κ²½ν•  μ μμ.
  μ •μ  ν©ν„°λ¦¬ λ©”μ„λ“, μ‹±κΈ€ν„΄ ν¨ν„΄, λ§¤κ°λ³€μ κΈ°λ° μƒμ„± λ°©μ‹ μ μ© κ°€λ¥!**

<br>

[ **μ •λ¦¬: SPIλ” μ–Έμ  ν•„μ”ν•κ³  μ–Έμ  ν•„μ”ν•μ§€ μ•μ€κ°€?** ]

| **κµ¬λ¶„** | **SPI μ—†μ΄ ServiceLoader μ‚¬μ©** | **SPI μ‚¬μ© (ServiceLoader + Provider Interface)** |
    | --- | --- | --- |
    | **κΈ°λ³Έ μƒμ„±μ ν•„μ μ—¬λ¶€** | β… ν•„μ”ν•¨ (λ°λ“μ‹ μμ–΄μ•Ό ν•¨) | β ν•„μ” μ—†μ (κ°μ²΄ μƒμ„± λ°©μ‹ μ§μ ‘ μ •μ κ°€λ¥) |
    | **κ°μ²΄ μƒμ„± λ°©μ‹ μ μ–΄ κ°€λ¥ μ—¬λ¶€** | β λ¶κ°€λ¥ (ServiceLoaderκ°€ κΈ°λ³Έ μƒμ„±μλ§ μ‚¬μ©) | β… κ°€λ¥ (μ •μ  ν©ν„°λ¦¬ λ©”μ„λ“, λ§¤κ°λ³€μ μ£Όμ… λ“± μ»¤μ¤ν„°λ§μ΄μ§• κ°€λ¥) |
    | **μ‹±κΈ€ν„΄, μΊμ‹± μ μ© κ°€λ¥ μ—¬λ¶€** | β λ¶κ°€λ¥ | β… κ°€λ¥ |
    | **μ‚¬μ©ν•΄μ•Ό ν•λ” κ²½μ°** | κ°μ²΄ μƒμ„± λ°©μ‹μ΄ λ‹¨μν•  λ• (κΈ°λ³Έ μƒμ„±μλ΅ μ¶©λ¶„) | κ°μ²΄ μƒμ„± λ°©μ‹ μ»¤μ¤ν„°λ§μ΄μ§•μ΄ ν•„μ”ν•  λ• |
    
> **μ¦‰, SPIλ” ν•„μ μ”μ†κ°€ μ•„λ‹λ©°, "κ°μ²΄ μƒμ„± λ°©μ‹μ„ μ§μ ‘ μ μ–΄ν•΄μ•Ό ν•  λ•λ§" μ‚¬μ©ν•λ” μ„ νƒ μ”μ†λ‹¤!**
    