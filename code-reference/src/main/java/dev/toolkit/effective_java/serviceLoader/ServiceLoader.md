<aside>
π“

# **ServiceLoaderλ€?**

## **1. μ •μ**

- **ServiceLoader**λ” **μλ°” 6λ¶€ν„° λ„μ…λ ν‘μ¤€ API**λ΅,

  - **λ™μ μΌλ΅ μ„λΉ„μ¤ κµ¬ν„μ²΄(ν΄λμ¤)λ¥Ό κ²€μƒ‰ν•κ³  λ΅λ“ν•  μ μλ„λ΅ μ§€μ›ν•λ” λ„κµ¬**μ΄λ‹¤.

  - κΈ°λ³Έμ μΌλ΅ **`META-INF/services` λ””λ ‰ν„°λ¦¬μ— λ“±λ΅λ μ„λΉ„μ¤ κµ¬ν„μ²΄λ¥Ό**
    **β†’ νƒμƒ‰ν•κ³  μΈμ¤ν„΄μ¤λ¥Ό μƒμ„±ν•λ” κΈ°λ¥μ„ μ κ³µ**ν•λ‹¤.
    
  <br>
  
- λ‚΄λ¶€μ μΌλ΅ λ¦¬ν”λ ‰μ…(`Class.forName()`, `newInstance()`)μ„ μ‚¬μ©ν•μ—¬

  β†’ ν΄λμ¤λ¥Ό λ΅λ“ν•κ³  κ°μ²΄λ¥Ό μƒμ„±ν•λ‹¤.


> μ¦‰, νΉμ • μΈν„°νμ΄μ¤λ‚ μ¶”μƒ ν΄λμ¤λ¥Ό κµ¬ν„ν•λ” μ—¬λ¬ ν΄λμ¤λ¥Ό λ°νƒ€μ„μ— νƒμƒ‰ν•μ—¬ μ‚¬μ©ν•  μ μλ„λ΅ ν•λ‹¤.
>

---

## **2. ServiceLoaderμ μ£Όμ” μ—­ν• **

1. **λ™μ  μ„λΉ„μ¤ κ²€μƒ‰**
    - `META-INF/services`μ— λ“±λ΅λ κµ¬ν„μ²΄λ“¤μ„ μλ™μΌλ΅ νƒμƒ‰ν•μ—¬ λ΅λ“ν•  μ μλ‹¤.
    
    <br>
   
2. **κµ¬μ²΄μ μΈ κµ¬ν„μ²΄μ— μμ΅΄ν•μ§€ μ•κ³  μ μ—°ν• κµ¬μ΅° μ κ³µ**
    - μ»΄νμΌ νƒ€μ„μ΄ μ•„λ‹λΌ **λ°νƒ€μ„μ— μ μ ν• κµ¬ν„μ²΄λ¥Ό μ„ νƒν•  μ μλ‹¤.**

    <br>

3. **ν™•μ¥ κ°€λ¥ν• κµ¬μ΅° μ§€μ›**
    - μƒλ΅μ΄ κµ¬ν„μ²΄κ°€ μ¶”κ°€λλ”λΌλ„ κΈ°μ΅΄ μ½”λ“λ¥Ό μμ •ν•μ§€ μ•κ³  μ‚¬μ©ν•  μ μλ‹¤.

    <br>

4. **μλ°” λ¨λ“ μ‹μ¤ν…(Java Module System, JPMS)κ³Όμ μ—°λ™ μ§€μ›**
    - μλ°” 9λ¶€ν„°λ” `module-info.java`λ¥Ό ν†µν•΄ μ„λΉ„μ¤ μ κ³µμλ¥Ό μ •μν•κ³  μ‚¬μ©ν•  μ μλ‹¤.

---

## **3. ServiceLoaderμ λ™μ‘ λ°©μ‹**

ServiceLoaderλ” λ‹¤μκ³Ό κ°™μ€ μμ„λ΅ λ™μ‘ν•λ‹¤.

1. **μ„λΉ„μ¤ μΈν„°νμ΄μ¤ μ •μ**
    - λ΅λ“ν•  λ€μƒμ΄ λλ” μΈν„°νμ΄μ¤(λλ” μ¶”μƒ ν΄λμ¤)λ¥Ό μ •μν•λ‹¤.

    <br>

2. **κµ¬ν„μ²΄ μ‘μ„±**
    - ν•΄λ‹Ή μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ” ν΄λμ¤λ“¤μ„ μ‘μ„±ν•λ‹¤.
   
    <br>
   
3. **μ„¤μ • νμΌ μ‘μ„±**
    - `META-INF/services` λ””λ ‰ν„°λ¦¬ μ•μ— μ„λΉ„μ¤ μΈν„°νμ΄μ¤μ
    - FQCN(Full Qualified Class Name, ν¨ν‚¤μ§€ ν¬ν•¨ ν΄λμ¤λ…)μ„ νμΌλ…μΌλ΅ ν• νμΌμ„ λ§λ“¤κ³ , 

      β†’ νμΌ λ‚΄μ©μ—λ” ν•΄λ‹Ή μ„λΉ„μ¤λ¥Ό κµ¬ν„ν• ν΄λμ¤λ“¤μ FQCNμ„ ν• μ¤„μ”© μ‘μ„±ν•λ‹¤.

    <br>

4. **ServiceLoaderλ¥Ό μ‚¬μ©ν•μ—¬ κµ¬ν„μ²΄ λ΅λ“**
    - `ServiceLoader.load(μΈν„°νμ΄μ¤.class)`λ¥Ό νΈμ¶ν•λ©΄,
    - μ„¤μ •λ νμΌμ„ μ½κ³  ν•΄λ‹Ή κµ¬ν„μ²΄λ“¤μ„ λ™μ μΌλ΅ λ΅λ“ν•μ—¬ μ‚¬μ©ν•  μ μλ‹¤.

---

## **4. ServiceLoaderμ μ¥μ **

1. β…  **λ™μ  λ΅λ”© μ§€μ›**
    - μ»΄νμΌ μ‹μ μ΄ μ•„λ‹λΌ **λ°νƒ€μ„μ— κµ¬ν„μ²΄λ¥Ό μ„ νƒν•  μ μμ–΄ μ μ—°μ„±μ΄ λ†’λ‹¤.**
    - μ¦‰, ν΄λΌμ΄μ–ΈνΈ μ½”λ“ λ³€κ²½ μ—†μ΄λ„ μƒλ΅μ΄ κµ¬ν„μ²΄λ¥Ό μ¶”κ°€ν•  μ μλ‹¤.

<br>

2. β…Β **λ¦¬ν”λ ‰μ…μ„ μ§μ ‘ μ‚¬μ©ν•  ν•„μ” μ—†μ**
    - κΈ°μ΅΄μ—λ” `Class.forName()`μ„ ν†µν•΄ μλ™μΌλ΅ (λ¦¬ν”λ™μ…μ„ ν†µν•΄ μ§μ ‘μ μΌλ΅)ν΄λμ¤λ¥Ό λ΅λ“ν•΄μ•Ό ν–μ§€λ§,

    <br>

    - **ServiceLoaderλ” μ΄λ¬ν• μ‘μ—…μ„ μλ™ν™”ν•΄μ£Όλ―€λ΅ κ°λ°μκ°€ μ§μ ‘ λ¦¬ν”λ ‰μ…μ„ λ‹¤λ£° ν•„μ”κ°€ μ—†λ‹¤.**

<br>

3. β… **μ μ§€λ³΄μμ„± ν–¥μƒ**
    - μƒλ΅μ΄ κµ¬ν„μ²΄κ°€ μ¶”κ°€λλ”λΌλ„ κΈ°μ΅΄ μ½”λ“λ¥Ό μμ •ν•  ν•„μ” μ—†μ΄

      β†’ μλ™μΌλ΅ κ°μ§€ν•μ—¬ μ‚¬μ©ν•  μ μλ‹¤.

<br>


4. β… **μλ°” λ¨λ“ μ‹μ¤ν…(JPMS)κ³Όμ μ—°λ™**
    - μλ°” 9λ¶€ν„° `module-info.java`λ¥Ό ν™μ©ν•μ—¬ λ¨λ“ κ°„μ μμ΅΄μ„±μ„ μ„¤μ •ν•κ³ ,

      β†’ μ„λΉ„μ¤ λ“±λ΅ λ° κ²€μƒ‰μ΄ κ°€λ¥ν•λ‹¤.


---

## **5. ServiceLoaderμ λ‹¨μ **

1. β… **μΈν„°νμ΄μ¤μ κΈ°λ³Έ μƒμ„±μκ°€ ν•„μ”**
    - ServiceLoaderλ¥Ό μ‚¬μ©ν•  κ²½μ°,
    
        **β†’ κµ¬ν„μ²΄μ— κΈ°λ³Έ μƒμ„±μ(default constructor)κ°€ ν•„μ”ν•λ‹¤.**

    <br>

    ```java
    ServiceLoader<MyClass> loader = ServiceLoader.load(MyClass.class);
    for (MyClass instance : loader) {
        // μ—¬κΈ°μ„ κΈ°λ³Έ μƒμ„±μκ°€ μ—†μΌλ©΄ μμ™Έ λ°μƒ
    }
    ```
    
    - λ§μ•½ κΈ°λ³Έ μƒμ„±μκ°€ μ—†κ±°λ‚ λ§¤κ°λ³€μκ°€ ν•„μ”ν• μƒμ„±μκ°€ μμ„ κ²½μ°, ServiceLoaderλ΅ λ΅λ“ν•  μ μ—†λ‹¤. 
    
      β†’ **λ‚΄λ¶€μ **μΌλ΅
        
        <br>
      
        - **`Class.newInstance()`** λλ”
        - **(Java 9 μ΄ν›„λ¶€ν„°) `getDeclaredConstructor().newInstance()`**  λ¥Ό μ‚¬μ©ν•μ—¬
        
        β†’ κ°μ²΄λ¥Ό μƒμ„± ν•κΈ° λ•λ¬Έ
        
        β†’ κΈ°λ³Έ μƒμ„±μκ°€ μ—†μΌλ©΄ `NoSuchMethodException` μμ™Έκ°€ λ°μƒ

<br>

2. β…  **νΉμ • κµ¬ν„μ²΄λ¥Ό μ„ νƒν•λ” λ΅μ§μ΄ μ—†μ**
   - `ServiceLoader.load(MyService.class)`λ¥Ό νΈμ¶ν•λ©΄ **λ“±λ΅λ λ¨λ“  κµ¬ν„μ²΄λ¥Ό λ΅λ“**ν•μ§€λ§,
   - κΈ°λ³Έμ μΌλ΅ **νΉμ • κµ¬ν„μ²΄λ¥Ό μ„ νƒν•  μ μλ” APIλ¥Ό μ κ³µν•μ§€ μ•λ”λ‹¤.**
   - λ”°λΌμ„ νΉμ • κµ¬ν„μ²΄λ¥Ό μ„ νƒν•λ ¤λ©΄ λ³„λ„μ ν•„ν„°λ§ λ΅μ§μ„ μ‘μ„±ν•΄μ•Ό ν•λ‹¤.

<br>

3. β… **μ‹¤ν–‰ μ‹ νΌν¬λ¨Όμ¤ μ΄μ**
   - `META-INF/services` νμΌμ„ μ½κ³  λ¦¬ν”λ ‰μ…μ„ μ‚¬μ©ν•μ—¬ κµ¬ν„μ²΄λ¥Ό λ΅λ“ν•λ” κ³Όμ •μ—μ„ **μΌμ •ν• μ„±λ¥ λΉ„μ©μ΄ λ°μƒ**ν•  μ μλ‹¤.

<br>

---


## 6. ServiceLoader λ„μ… μ „κ³Ό ν›„μ λ™μ  λ΅λ”© λ°©λ²•

### < ServiceLoader λ„μ… μ „ >

[ κ°λ°μκ°€ μ§μ ‘ ν•΄μ•Ό ν•  μΌμ΄ λ§μ•μ ]

1. **μ„λΉ„μ¤ μΈν„°νμ΄μ¤ μ •μ**
    - `MyService` κ°™μ€ μΈν„°νμ΄μ¤λ¥Ό λ§λ“¤κ³ 
      
    <br>
    
2. **κµ¬ν„μ²΄ λ“±λ΅ (META-INF/services νμΌ μƒμ„±)**
    - `META-INF/services/com.example.MyService` νμΌμ„ λ§λ“¤κ³  κµ¬ν„μ²΄λ¥Ό μλ™μΌλ΅ λ“±λ΅

    <br>   

3. **μ„λΉ„μ¤ λ΅λ”© λ°©μ‹ κµ¬ν„**
    - `Class.forName()` + λ¦¬ν”λ ‰μ…μΌλ΅ μλ™ λ΅λ“
    - `Map<String, Class<?>>` κ°™μ€ κµ¬μ΅°λ΅ κ΄€λ¦¬
    - λ™μ μΌλ΅ μΈμ¤ν„΄μ¤λ¥Ό μƒμ„±ν•λ” μ½”λ“ μ‘μ„±

> μ΄κ±Έ λ‹¤ ν•λ ¤λ©΄ μΌμΆ…μ **λ―Έλ‹ ν”„λ μ„μ›ν¬λ¥Ό μ§μ ‘ λ§λ“¤μ–΄μ•Ό ν–μ.**

<br>

### < ServiceLoader λ„μ… ν›„ >

[  ServiceLoader λ“±μ¥ μ΄ν›„ (μλ°” 6+) ]

- `ServiceLoader`κ°€ μ΄ λ¨λ“  κ³Όμ •μ„ μλ™μΌλ΅ μ²λ¦¬
- `ServiceLoader.load(MyService.class)` ν• μ¤„μ΄λ©΄ λ
>**λ”°λ΅ ν”„λ μ„μ›ν¬λ¥Ό λ§λ“¤ ν•„μ”κ°€ μ—†μ**

<br>

---

## 2-7. ServiceLoader μ •λ¦¬

- β… `ServiceLoader`λ” **μ„λΉ„μ¤ κµ¬ν„μ²΄λ¥Ό λ™μ μΌλ΅ κ²€μƒ‰ν•κ³  λ΅λ“ν•λ” ν‘μ¤€ API**.
- β… **λ¦¬ν”λ ‰μ…μ„ μ§μ ‘ μ‚¬μ©ν•μ§€ μ•μ•„λ„ κµ¬ν„μ²΄λ¥Ό μλ™μΌλ΅ λ΅λ“ν•  μ μλ„λ΅ μ§€μ›**.
- β… **κµ¬ν„μ²΄ ν™•μ¥ μ‹ μ μ§€λ³΄μμ„±μ„ λ†’μ΄κ³ , μ½”λ“ μμ • μ—†μ΄ μ μ—°ν• κµ¬μ΅° μ κ³µ**.
- β… λ‹¨, **κΈ°λ³Έ μƒμ„±μκ°€ ν•„μ”ν•κ³ , νΉμ • κµ¬ν„μ²΄ μ„ νƒμ΄ μ–΄λ µλ‹¤λ” λ‹¨μ ** μ΅΄μ¬.
</aside>